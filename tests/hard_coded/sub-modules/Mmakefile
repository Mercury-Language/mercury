#-----------------------------------------------------------------------------#
#
# This directory contains test cases for sub-modules,
# including both nested modules and seperate sub-modules.
#
#-----------------------------------------------------------------------------#

main_target: check

include ../../Mmake.common
-include ../../Mmake.params

#-----------------------------------------------------------------------------#

#
# Note: currently these test cases do not reliabily pass
# if you use parallel make.
#

PROGS=	\
	use_submodule \
	parent \
	parent2 \
	nested \
	nested2 \
	nested3 \
	class \
	nested_intermod_main

MCFLAGS-nested_intermod	=	--intermodule-optimization
MCFLAGS-nested_intermod_main =	--intermodule-optimization

#-----------------------------------------------------------------------------#

DEPS=	$(PROGS:%=%.dep)
DEPENDS=$(PROGS:%=%.depend)
OUTS=	$(PROGS:%=%.out)
RESS=	$(PROGS:%=%.res)

#-----------------------------------------------------------------------------#

dep:	$(DEPS)

depend:	$(DEPENDS)

check:	$(OUTS) $(RESS)

all:	$(PROGS)

#-----------------------------------------------------------------------------#
